{"version":3,"file":"index.js","sources":["../src/BitSet.ts","../src/BloomFilter.ts"],"sourcesContent":["type Bit = 0 | 1;\n\nexport class BitSet {\n  private readonly map: Map<number, Bit> = new Map();\n  private readonly size: number;\n\n  constructor(size: number) {\n    this.size = size;\n  }\n\n  set(position: number, value: Bit) {\n    this.map.set(position % this.size, value);\n  }\n\n  get(position: number): Bit {\n    return this.map.get(position % this.size) || 0;\n  }\n\n  toString(): string {\n    const str = [];\n\n    for (let i = 0; i < this.size; i++) {\n      str.push(this.get(i));\n    }\n\n    return str.join('');\n  }\n}\n","import { BitSet } from './BitSet';\nimport { IBloomFilter } from './IBloomFilter';\n\nexport class BloomFilter<T> implements IBloomFilter<T> {\n  private readonly bitSet: BitSet;\n\n  private readonly hash: Array<(item: T) => number>;\n\n  constructor(size: number, hash: Array<(item: T) => number>) {\n    this.bitSet = new BitSet(size);\n    this.hash = hash;\n  }\n\n  add(item: T): void {\n    this.hash.forEach(hash => {\n      this.bitSet.set(hash(item), 1);\n    });\n  }\n\n  has(item: T): boolean {\n    return !this.hash.some(hash => this.bitSet.get(hash(item)) === 0);\n  }\n}\n"],"names":[],"mappings":"MAEa,MAAM;IAIjB,YAAY,IAAY;QAHP,QAAG,GAAqB,IAAI,GAAG,EAAE,CAAC;QAIjD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;KAClB;IAED,GAAG,CAAC,QAAgB,EAAE,KAAU;QAC9B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;KAC3C;IAED,GAAG,CAAC,QAAgB;QAClB,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAChD;IAED,QAAQ;QACN,MAAM,GAAG,GAAG,EAAE,CAAC;QAEf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE;YAClC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;SACvB;QAED,OAAO,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;KACrB;CACF;;MCxBY,WAAW;IAKtB,YAAY,IAAY,EAAE,IAAgC;QACxD,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC;QAC/B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;KAClB;IAED,GAAG,CAAC,IAAO;QACT,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI;YACpB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;SAChC,CAAC,CAAC;KACJ;IAED,GAAG,CAAC,IAAO;QACT,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;KACnE;CACF;;;;"}