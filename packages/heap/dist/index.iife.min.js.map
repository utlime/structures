{"version":3,"file":"index.iife.min.js","sources":["../src/BinaryTree.ts","../src/BinaryHeap.ts","../src/MinHeap.ts","../src/MaxHeap.ts"],"sourcesContent":["export class BinaryTree<T> {\n  private readonly storage: T[] = [];\n\n  push(value: T) {\n    this.storage.push(value);\n  }\n\n  pop(): T | undefined {\n    return this.storage.pop();\n  }\n\n  swap(a: number, b: number) {\n    [this.storage[a], this.storage[b]] = [this.storage[b], this.storage[a]];\n  }\n\n  value(position: number): T | undefined {\n    return this.storage[position];\n  }\n\n  parent(position: number): number | undefined {\n    const parent = Math.floor((position - 1) / 2);\n    return this.exists(parent) ? parent : undefined;\n  }\n\n  left(position: number): number | undefined {\n    const left = 2 * position + 1;\n    return this.exists(left) ? left : undefined;\n  }\n\n  right(position: number): number | undefined {\n    const right = 2 * position + 2;\n    return this.exists(right) ? right : undefined;\n  }\n\n  root(): number | undefined {\n    return this.storage.length > 0 ? 0 : undefined;\n  }\n\n  tail(): number | undefined {\n    return this.storage.length > 0 ? this.storage.length - 1 : undefined;\n  }\n\n  exists(a: number): boolean {\n    return a >= 0 && a < this.storage.length;\n  }\n}\n","import { BinaryTree } from './BinaryTree';\nimport { IHeap } from './IHeap';\n\ntype PriorityItem<T> = Readonly<{ item: T; priority: number }>;\n\ntype isAGreaterOrEqualB<T> = (a: T, b: T) => boolean;\n\nexport class BinaryHeap<T> implements IHeap<T> {\n  private readonly storage: BinaryTree<PriorityItem<T>> = new BinaryTree();\n\n  private readonly comparator: isAGreaterOrEqualB<PriorityItem<T>>;\n\n  constructor(comparator?: isAGreaterOrEqualB<PriorityItem<T>>) {\n    this.comparator = comparator != null ? comparator : ({ priority: a }, { priority: b }) => a >= b;\n  }\n\n  extract(): T | undefined {\n    const root = this.storage.root();\n    const tail = this.storage.tail();\n\n    if (root != null && tail != null) {\n      this.storage.swap(root, tail);\n    }\n\n    const item = this.storage.pop();\n\n    let position = this.storage.root();\n    while (position != null) {\n      const left = this.storage.left(position);\n      const right = this.storage.right(position);\n      let next;\n\n      if (right != null && left != null && !this.compare(left, right)) {\n        next = right;\n      } else if (left != null) {\n        next = left;\n      }\n\n      if (next != null && !this.compare(position, next)) {\n        this.storage.swap(position, next);\n        position = next;\n      } else {\n        position = undefined;\n      }\n    }\n\n    return item != null ? item.item : undefined;\n  }\n\n  insert(item: T, priority: number): void {\n    this.storage.push({ item, priority });\n\n    let position = <number>this.storage.tail();\n    let parent = this.storage.parent(position);\n\n    while (parent != null && !this.compare(parent, position)) {\n      this.storage.swap(position, parent);\n      position = parent;\n      parent = this.storage.parent(position);\n    }\n  }\n\n  private compare(a: number, b: number) {\n    return this.comparator(<PriorityItem<T>>this.storage.value(a), <PriorityItem<T>>this.storage.value(b));\n  }\n}\n","import { BinaryHeap } from './BinaryHeap';\nimport { IHeap } from './IHeap';\n\nexport class MinHeap<T> implements IHeap<T> {\n  private readonly heap: BinaryHeap<T>;\n\n  constructor() {\n    this.heap = new BinaryHeap(({ priority: a }, { priority: b }) => a <= b);\n  }\n\n  insert(item: T, priority: number) {\n    this.heap.insert(item, priority);\n  }\n\n  extract(): T | undefined {\n    return this.heap.extract();\n  }\n}\n","import { BinaryHeap } from './BinaryHeap';\nimport { IHeap } from './IHeap';\n\nexport class MaxHeap<T> implements IHeap<T> {\n  private readonly heap: BinaryHeap<T>;\n\n  constructor() {\n    this.heap = new BinaryHeap();\n  }\n\n  insert(item: T, priority: number) {\n    this.heap.insert(item, priority);\n  }\n\n  extract(): T | undefined {\n    return this.heap.extract();\n  }\n}\n"],"names":["BinaryTree","[object Object]","this","value","storage","push","pop","a","b","position","parent","Math","floor","exists","undefined","left","right","length","BinaryHeap","comparator","priority","root","tail","swap","item","next","compare","heap","insert","extract"],"mappings":"8CAAaA,EAAbC,cACmBC,aAAe,GAEhCD,KAAKE,GACHD,KAAKE,QAAQC,KAAKF,GAGpBF,MACE,OAAOC,KAAKE,QAAQE,MAGtBL,KAAKM,EAAWC,IACbN,KAAKE,QAAQG,GAAIL,KAAKE,QAAQI,IAAM,CAACN,KAAKE,QAAQI,GAAIN,KAAKE,QAAQG,IAGtEN,MAAMQ,GACJ,OAAOP,KAAKE,QAAQK,GAGtBR,OAAOQ,GACL,MAAMC,EAASC,KAAKC,OAAOH,EAAW,GAAK,GAC3C,OAAOP,KAAKW,OAAOH,GAAUA,OAASI,EAGxCb,KAAKQ,GACH,MAAMM,EAAO,EAAIN,EAAW,EAC5B,OAAOP,KAAKW,OAAOE,GAAQA,OAAOD,EAGpCb,MAAMQ,GACJ,MAAMO,EAAQ,EAAIP,EAAW,EAC7B,OAAOP,KAAKW,OAAOG,GAASA,OAAQF,EAGtCb,OACE,OAAOC,KAAKE,QAAQa,OAAS,EAAI,OAAIH,EAGvCb,OACE,OAAOC,KAAKE,QAAQa,OAAS,EAAIf,KAAKE,QAAQa,OAAS,OAAIH,EAG7Db,OAAOM,GACL,OAAOA,GAAK,GAAKA,EAAIL,KAAKE,QAAQa,cCpCzBC,EAKXjB,YAAYkB,GAJKjB,aAAuC,IAAIF,EAK1DE,KAAKiB,WAA2B,MAAdA,EAAqBA,EAAa,EAAGC,SAAUb,IAAOa,SAAUZ,KAAQD,GAAKC,EAGjGP,UACE,MAAMoB,EAAOnB,KAAKE,QAAQiB,OACpBC,EAAOpB,KAAKE,QAAQkB,OAEd,MAARD,GAAwB,MAARC,GAClBpB,KAAKE,QAAQmB,KAAKF,EAAMC,GAG1B,MAAME,EAAOtB,KAAKE,QAAQE,MAE1B,IAAIG,EAAWP,KAAKE,QAAQiB,OAC5B,KAAmB,MAAZZ,GAAkB,CACvB,MAAMM,EAAOb,KAAKE,QAAQW,KAAKN,GACzBO,EAAQd,KAAKE,QAAQY,MAAMP,GACjC,IAAIgB,EAES,MAATT,GAAyB,MAARD,GAAiBb,KAAKwB,QAAQX,EAAMC,GAEtC,MAARD,IACTU,EAAOV,GAFPU,EAAOT,EAKG,MAARS,GAAiBvB,KAAKwB,QAAQjB,EAAUgB,GAI1ChB,OAAWK,GAHXZ,KAAKE,QAAQmB,KAAKd,EAAUgB,GAC5BhB,EAAWgB,GAMf,OAAe,MAARD,EAAeA,EAAKA,UAAOV,EAGpCb,OAAOuB,EAASJ,GACdlB,KAAKE,QAAQC,KAAK,CAAEmB,KAAAA,EAAMJ,SAAAA,IAE1B,IAAIX,EAAmBP,KAAKE,QAAQkB,OAChCZ,EAASR,KAAKE,QAAQM,OAAOD,GAEjC,KAAiB,MAAVC,IAAmBR,KAAKwB,QAAQhB,EAAQD,IAC7CP,KAAKE,QAAQmB,KAAKd,EAAUC,GAC5BD,EAAWC,EACXA,EAASR,KAAKE,QAAQM,OAAOD,GAIzBR,QAAQM,EAAWC,GACzB,OAAON,KAAKiB,WAA4BjB,KAAKE,QAAQD,MAAMI,GAAqBL,KAAKE,QAAQD,MAAMK,2CCzDrGP,cACEC,KAAKyB,KAAO,IAAIT,EAAW,EAAGE,SAAUb,IAAOa,SAAUZ,KAAQD,GAAKC,GAGxEP,OAAOuB,EAASJ,GACdlB,KAAKyB,KAAKC,OAAOJ,EAAMJ,GAGzBnB,UACE,OAAOC,KAAKyB,KAAKE,4BCTnB5B,cACEC,KAAKyB,KAAO,IAAIT,EAGlBjB,OAAOuB,EAASJ,GACdlB,KAAKyB,KAAKC,OAAOJ,EAAMJ,GAGzBnB,UACE,OAAOC,KAAKyB,KAAKE"}