{"version":3,"file":"index.js","sources":["../src/BinaryTree.ts","../src/BinaryHeap.ts","../src/MinHeap.ts","../src/MaxHeap.ts"],"sourcesContent":["export class BinaryTree<T> {\n  private readonly storage: T[] = [];\n\n  push(value: T) {\n    this.storage.push(value);\n  }\n\n  pop(): T | undefined {\n    return this.storage.pop();\n  }\n\n  swap(a: number, b: number) {\n    [this.storage[a], this.storage[b]] = [this.storage[b], this.storage[a]];\n  }\n\n  value(position: number): T | undefined {\n    return this.storage[position];\n  }\n\n  parent(position: number): number | undefined {\n    const parent = Math.floor((position - 1) / 2);\n    return this.exists(parent) ? parent : undefined;\n  }\n\n  left(position: number): number | undefined {\n    const left = 2 * position + 1;\n    return this.exists(left) ? left : undefined;\n  }\n\n  right(position: number): number | undefined {\n    const right = 2 * position + 2;\n    return this.exists(right) ? right : undefined;\n  }\n\n  root(): number | undefined {\n    return this.storage.length > 0 ? 0 : undefined;\n  }\n\n  tail(): number | undefined {\n    return this.storage.length > 0 ? this.storage.length - 1 : undefined;\n  }\n\n  exists(a: number): boolean {\n    return a >= 0 && a < this.storage.length;\n  }\n}\n","import { BinaryTree } from './BinaryTree';\nimport { IHeap } from './IHeap';\n\ntype PriorityItem<T> = Readonly<{ item: T; priority: number }>;\n\ntype isAGreaterOrEqualB<T> = (a: T, b: T) => boolean;\n\nexport class BinaryHeap<T> implements IHeap<T> {\n  private readonly storage: BinaryTree<PriorityItem<T>> = new BinaryTree();\n\n  private readonly comparator: isAGreaterOrEqualB<PriorityItem<T>>;\n\n  constructor(comparator?: isAGreaterOrEqualB<PriorityItem<T>>) {\n    this.comparator = comparator != null ? comparator : ({ priority: a }, { priority: b }) => a >= b;\n  }\n\n  extract(): T | undefined {\n    const root = this.storage.root();\n    const tail = this.storage.tail();\n\n    if (root != null && tail != null) {\n      this.storage.swap(root, tail);\n    }\n\n    const item = this.storage.pop();\n\n    let position = this.storage.root();\n    while (position != null) {\n      const left = this.storage.left(position);\n      const right = this.storage.right(position);\n      let next;\n\n      if (right != null && left != null && !this.compare(left, right)) {\n        next = right;\n      } else if (left != null) {\n        next = left;\n      }\n\n      if (next != null && !this.compare(position, next)) {\n        this.storage.swap(position, next);\n        position = next;\n      } else {\n        position = undefined;\n      }\n    }\n\n    return item != null ? item.item : undefined;\n  }\n\n  insert(item: T, priority: number): void {\n    this.storage.push({ item, priority });\n\n    let position = <number>this.storage.tail();\n    let parent = this.storage.parent(position);\n\n    while (parent != null && !this.compare(parent, position)) {\n      this.storage.swap(position, parent);\n      position = parent;\n      parent = this.storage.parent(position);\n    }\n  }\n\n  private compare(a: number, b: number) {\n    return this.comparator(<PriorityItem<T>>this.storage.value(a), <PriorityItem<T>>this.storage.value(b));\n  }\n}\n","import { BinaryHeap } from './BinaryHeap';\nimport { IHeap } from './IHeap';\n\nexport class MinHeap<T> implements IHeap<T> {\n  private readonly heap: BinaryHeap<T>;\n\n  constructor() {\n    this.heap = new BinaryHeap(({ priority: a }, { priority: b }) => a <= b);\n  }\n\n  insert(item: T, priority: number) {\n    this.heap.insert(item, priority);\n  }\n\n  extract(): T | undefined {\n    return this.heap.extract();\n  }\n}\n","import { BinaryHeap } from './BinaryHeap';\nimport { IHeap } from './IHeap';\n\nexport class MaxHeap<T> implements IHeap<T> {\n  private readonly heap: BinaryHeap<T>;\n\n  constructor() {\n    this.heap = new BinaryHeap();\n  }\n\n  insert(item: T, priority: number) {\n    this.heap.insert(item, priority);\n  }\n\n  extract(): T | undefined {\n    return this.heap.extract();\n  }\n}\n"],"names":[],"mappings":"MAAa,UAAU;IAAvB;QACmB,YAAO,GAAQ,EAAE,CAAC;KA4CpC;IA1CC,IAAI,CAAC,KAAQ;QACX,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC1B;IAED,GAAG;QACD,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;KAC3B;IAED,IAAI,CAAC,CAAS,EAAE,CAAS;QACvB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;KACzE;IAED,KAAK,CAAC,QAAgB;QACpB,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;KAC/B;IAED,MAAM,CAAC,QAAgB;QACrB,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;QAC9C,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,SAAS,CAAC;KACjD;IAED,IAAI,CAAC,QAAgB;QACnB,MAAM,IAAI,GAAG,CAAC,GAAG,QAAQ,GAAG,CAAC,CAAC;QAC9B,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,SAAS,CAAC;KAC7C;IAED,KAAK,CAAC,QAAgB;QACpB,MAAM,KAAK,GAAG,CAAC,GAAG,QAAQ,GAAG,CAAC,CAAC;QAC/B,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,GAAG,SAAS,CAAC;KAC/C;IAED,IAAI;QACF,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC;KAChD;IAED,IAAI;QACF,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,GAAG,SAAS,CAAC;KACtE;IAED,MAAM,CAAC,CAAS;QACd,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;KAC1C;CACF;;MCtCY,UAAU;IAKrB,YAAY,UAAgD;QAJ3C,YAAO,GAAgC,IAAI,UAAU,EAAE,CAAC;QAKvE,IAAI,CAAC,UAAU,GAAG,UAAU,IAAI,IAAI,GAAG,UAAU,GAAG,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;KAClG;IAED,OAAO;QACL,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACjC,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QAEjC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,EAAE;YAChC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAC/B;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;QAEhC,IAAI,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACnC,OAAO,QAAQ,IAAI,IAAI,EAAE;YACvB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACzC,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YAC3C,IAAI,IAAI,CAAC;YAET,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE;gBAC/D,IAAI,GAAG,KAAK,CAAC;aACd;iBAAM,IAAI,IAAI,IAAI,IAAI,EAAE;gBACvB,IAAI,GAAG,IAAI,CAAC;aACb;YAED,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,EAAE;gBACjD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;gBAClC,QAAQ,GAAG,IAAI,CAAC;aACjB;iBAAM;gBACL,QAAQ,GAAG,SAAS,CAAC;aACtB;SACF;QAED,OAAO,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;KAC7C;IAED,MAAM,CAAC,IAAO,EAAE,QAAgB;QAC9B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC;QAEtC,IAAI,QAAQ,GAAW,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QAC3C,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAE3C,OAAO,MAAM,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,QAAQ,CAAC,EAAE;YACxD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YACpC,QAAQ,GAAG,MAAM,CAAC;YAClB,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;SACxC;KACF;IAEO,OAAO,CAAC,CAAS,EAAE,CAAS;QAClC,OAAO,IAAI,CAAC,UAAU,CAAkB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAmB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;KACxG;CACF;;MC9DY,OAAO;IAGlB;QACE,IAAI,CAAC,IAAI,GAAG,IAAI,UAAU,CAAC,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;KAC1E;IAED,MAAM,CAAC,IAAO,EAAE,QAAgB;QAC9B,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;KAClC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;KAC5B;CACF;;MCdY,OAAO;IAGlB;QACE,IAAI,CAAC,IAAI,GAAG,IAAI,UAAU,EAAE,CAAC;KAC9B;IAED,MAAM,CAAC,IAAO,EAAE,QAAgB;QAC9B,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;KAClC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;KAC5B;CACF;;;;"}